import{a as V}from"./chunk-5ELSBVWL.js";import{a as q}from"./chunk-6BXH6IQQ.js";import{C as T,b as y,d as k,j as N,p as G,q as A,s as R,t as j}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{$ as f,B as b,Da as S,F as u,I as m,J as t,K as o,S as g,_ as i,gb as v,hb as x,ib as C,kb as P,lb as E,mb as F,oa as h,pb as O,qb as M,rb as I,sb as w,ua as _,x as l,z as d}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function $(a,r){if(a&1&&(t(0,"ion-select-option"),i(1),o()),a&2){let p=r.$implicit;l(),f(p.nombre_evento)}}function J(a,r){if(a&1&&(t(0,"ion-select-option"),i(1),o()),a&2){let p=r.$implicit;l(),f(p.nombre_evento)}}var oe=(()=>{let r=class r{constructor(e,c,n,s){this.fb=e,this.AdminService=c,this.router=n,this.PublicService=s,this.eventos=[],this.cancelarForm=this.fb.group({nombre_evento:["",[v.required]]}),this.generarForm=this.fb.group({nombre_evento:["",[v.required]]})}ngOnInit(){this.cancelarForm.reset(),this.generarForm.reset(),this.PublicService.consulta_eventos().subscribe(e=>{let n=e.value.filter((s,D,B)=>D===B.findIndex(H=>H.id_evento===s.id_evento));this.eventos=n,localStorage.setItem("Eventos",JSON.stringify(n))})}cancelarEvento(){this.cancelarForm.valid?this.AdminService.cancelar_evento(this.cancelarForm.value).subscribe(e=>{e.status?(this.cancelarForm.reset(),alert("Evento cancelado"),this.router.navigate(["/tabs-admin/calendario"])):alert(e.message)},e=>{console.error("Error al registrase:",e),alert("Hubo un problema al cancelar evento")}):alert("Por favor, completa todos los campos correctamente.")}reporteEvento(){this.generarForm.valid?this.AdminService.reporte_evento(this.generarForm.value).subscribe(e=>{e.status?(this.generarForm.reset(),alert("Reporte enviado"),this.router.navigate(["/tabs-admin/calendario"])):alert(e.message)},e=>{console.error("Error al enviar reporte:",e),alert("Hubo un problema al generar reporte")}):alert("Por favor, completa todos los campos correctamente.")}};r.\u0275fac=function(c){return new(c||r)(d(M),d(V),d(S),d(q))},r.\u0275cmp=b({type:r,selectors:[["app-cancelar"]],decls:26,vars:5,consts:[[3,"fullscreen"],[1,"titulo",2,"margin-top","4vh"],[1,"contenedor-formulario"],[1,"formulario"],[1,"titulo"],[3,"ngSubmit","formGroup"],["lines","none"],["position","stacked"],["formControlName","nombre_evento","placeholder","Selecciona un evento","required",""],[4,"ngFor","ngForOf"],["expand","block","type","submit"],[1,"cancelar-container"],["expand","block","type","submit",1,"button-cancelar"]],template:function(c,n){c&1&&(t(0,"ion-content",0)(1,"h2",1),i(2,"Administraci\xF3n"),o(),t(3,"div",2)(4,"div",3)(5,"h2",4),i(6,"Generar Reporte"),o(),t(7,"form",5),g("ngSubmit",function(){return n.reporteEvento()}),t(8,"ion-item",6)(9,"ion-label",7),i(10,"Genere reporte de:"),o(),t(11,"ion-select",8),u(12,$,2,1,"ion-select-option",9),o()(),t(13,"ion-button",10),i(14," GENERAR "),o()()()(),t(15,"div",11)(16,"h2"),i(17,"Cancelar Evento"),o(),t(18,"form",5),g("ngSubmit",function(){return n.cancelarEvento()}),t(19,"ion-item",6)(20,"ion-label",7),i(21,"Evento a cancelar"),o(),t(22,"ion-select",8),u(23,J,2,1,"ion-select-option",9),o()(),t(24,"ion-button",12),i(25," Cancelar Evento "),o()()()()),c&2&&(m("fullscreen",!0),l(7),m("formGroup",n.generarForm),l(5),m("ngForOf",n.eventos),l(6),m("formGroup",n.cancelarForm),l(5),m("ngForOf",n.eventos))},dependencies:[T,k,N,G,A,R,j,y,I,P,x,C,O,_,h,w,E,F],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #0a0a0a}.cancelar-container[_ngcontent-%COMP%]{max-width:450px;width:90%;margin:auto;margin-top:7vh!important;margin-bottom:7vh!important;padding:2rem;background-color:#111;border-radius:20px;box-shadow:0 0 25px #7c3aed;color:#fff;text-align:center}ion-item[_ngcontent-%COMP%]{background-color:#1e1e1e;border-radius:10px;margin-top:1rem;--highlight-color-focused: #7c3aed;--color: white}ion-label[_ngcontent-%COMP%]{color:#ccc}ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{margin-top:2rem;--background: #e11d48;--border-radius: 10px;font-weight:700}@media screen and (max-width: 480px){.cancelar-container[_ngcontent-%COMP%]{padding:1rem;margin-top:1vh}}.fondo-oscuro[_ngcontent-%COMP%]{--background: #0a0a0a;display:flex;justify-content:center;align-items:center;height:100%}.contenedor-formulario[_ngcontent-%COMP%]{max-width:450px;width:90%;margin:auto;margin-top:7vh;padding:2rem;background-color:#111;border-radius:20px;box-shadow:0 0 25px #7c3aed;color:#fff;text-align:center}.button-cancelar[_ngcontent-%COMP%]{--background:red;--color:white}.titulo[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:1.5rem;font-weight:700}ion-input[_ngcontent-%COMP%]{background-color:#1c1c2e;color:#fff;border-radius:8px;margin-bottom:1rem;--padding-start: 1rem}ion-input[_ngcontent-%COMP%]::part(native-input){color:#fff}ion-button[_ngcontent-%COMP%]{--color:white!important;--background: #7c3aed;--border-radius: 12px;font-weight:700}"]});let a=r;return a})();export{oe as CancelarPage};
