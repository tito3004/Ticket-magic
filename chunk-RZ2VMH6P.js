import{a as S}from"./chunk-XISFFDA5.js";import{C as y,j,m as w}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{$ as v,B as u,Ba as P,Da as I,F as x,I as m,J as a,K as c,L as g,_ as d,aa as C,ba as _,oa as M,ua as O,w as b,x as n,z as p}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as f}from"./chunk-JHI3MBHO.js";var U={production:!0};function q(i,e){if(i&1&&(a(0,"div",4)(1,"div",5)(2,"h2"),d(3),c(),a(4,"p",6),d(5),c(),g(6,"img",7),a(7,"p",8),d(8),c()()()),i&2){let s=e.$implicit;n(3),v(s.evento),n(2),_("",s.fecha," \u2022 ",s.hora),n(),m("src",s.qr,b),n(2),C("ID: ",s.id)}}var T=(()=>{let e=class e{constructor(o,t,l){this.router=o,this.route=t,this.UsersService=l,this.boletos=[],this.loading=!1,this.appBaseUrl=U.webAppBaseUrl??window.location.origin}ngOnInit(){this.cargar()}cargar(o){this.loading=!0,this.UsersService.getResumenPorUsuario().subscribe({next:t=>f(this,null,function*(){if(this.loading=!1,o?.target?.complete?.(),!t.status){alert();return}let l=t.data??[];this.boletos=l.map(r=>{let h=`${this.appBaseUrl}/tabs-admin/comprobar?cod-unico-boleto=${encodeURIComponent(r.cod_unico_boleto)}`,E=`https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=${encodeURIComponent(h)}`;return{evento:r.nombre_evento,fecha:String(r.fecha),hora:String(r.hora),id:r.cod_unico_boleto,cantidad:r.cantidad,link:h,qr:E}})}),error:()=>f(this,null,function*(){this.loading=!1,o?.target?.complete?.(),alert("Error al cargar el historial")})})}trackByCod(o,t){return t.id}};e.\u0275fac=function(t){return new(t||e)(p(I),p(P),p(S))},e.\u0275cmp=u({type:e,selectors:[["app-historial"]],decls:7,vars:2,consts:[[1,"ion-padding",3,"fullscreen"],[1,"historial-title"],[1,"tarjetas-container"],["class","tarjeta-boleto",4,"ngFor","ngForOf"],[1,"tarjeta-boleto"],[1,"contenido-boleto"],[1,"fecha"],["alt","C\xF3digo QR",1,"qr-img",3,"src"],[1,"id"]],template:function(t,l){t&1&&(g(0,"ion-header"),a(1,"ion-content",0)(2,"div",1)(3,"h1"),d(4,"Historial de boletos"),c()(),a(5,"div",2),x(6,q,9,5,"div",3),c()()),t&2&&(n(),m("fullscreen",!0),n(5),m("ngForOf",l.boletos))},dependencies:[O,M,y,j,w],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #0f0f1a, #1a1a2e)}.historial-title[_ngcontent-%COMP%]{text-align:center;margin-top:16px;margin-bottom:24px}.historial-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;align-content:center}.tarjetas-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px}.tarjeta-boleto[_ngcontent-%COMP%]{background-color:#1e1e2e;border-radius:16px;padding:16px;width:260px;box-shadow:0 4px 12px #0009;text-align:center;transition:transform .2s}.tarjeta-boleto[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.tarjeta-boleto[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin-bottom:6px}.tarjeta-boleto[_ngcontent-%COMP%]   .fecha[_ngcontent-%COMP%]{font-size:14px;color:#ccc;margin-bottom:12px}.qr-img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px;border:2px solid #7C3AED;border-radius:8px}.id[_ngcontent-%COMP%]{font-size:13px;color:#bbb}.id[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #0f0f1a;--color: #ffffff}.id[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff;font-weight:700}"]});let i=e;return i})();export{T as HistorialPage};
