import{a as R}from"./chunk-XISFFDA5.js";import{C as S,c as k,d as y,j as O,n as w,o as q,p as I}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{B as m,Ba as C,Da as M,J as a,K as c,L as p,S as l,_ as g,da as f,ea as h,fa as b,hb as P,jb as v,l as d,rb as x,ua as _,x as u}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var Y=(()=>{let n=class n{constructor(){this.route=d(C),this.router=d(M),this.usersSvc=d(R),this.codigo="",this.loading=!1}ngOnInit(){this.route.queryParamMap.subscribe(i=>{let o=i.get("cod-unico-boleto");o&&o.trim()&&(this.codigo=o.trim(),this.verificarYAlertar(this.codigo))})}comprobarCodigo(){if(!this.codigo?.trim()){alert(`C\xF3digo requerido
Ingresa un c\xF3digo para comprobar.`);return}this.router.navigate([],{relativeTo:this.route,queryParams:{"cod-unico-boleto":this.codigo.trim()},queryParamsHandling:"merge"})}verificarYAlertar(i){this.loading||(this.loading=!0,this.usersSvc.getResumenPorCodigo(i).subscribe({next:o=>{if(this.loading=!1,!o?.status){alert(`No encontrado
${o?.message||"No se encontr\xF3 informaci\xF3n para ese c\xF3digo."}`);return}let t=o.data??[];if(!t.length){alert(`Sin datos
No hay registros para ese c\xF3digo.`);return}let e=t[0],r=e.hora?e.hora.toString().slice(0,5):"",E=`Evento: ${e.nombre_evento}
Fecha: ${e.fecha}
Hora: ${r}
Cantidad: ${e.cantidad}
C\xF3digo: ${e.cod_unico_boleto}`;alert(E)},error:()=>{this.loading=!1,alert(`Error
No se pudo verificar el c\xF3digo.`)}}))}abrirCamara(){alert("Integraci\xF3n de esc\xE1ner pendiente.")}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=m({type:n,selectors:[["app-reporte"]],decls:11,vars:1,consts:[[1,"fondo-oscuro"],[1,"contenedor-formulario"],[1,"formulario"],[1,"titulo"],["fill","outline","lines","none",1,"qr-item"],["placeholder","C\xF3digo",3,"ngModelChange","keyup.enter","ngModel"],["slot","end","fill","clear","aria-label","Abrir c\xE1mara",1,"qr-camera",3,"click"],["name","camera-outline"],["expand","block",3,"click"]],template:function(o,t){o&1&&(a(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Compruebe su c\xF3digo QR"),c(),a(5,"ion-item",4)(6,"ion-input",5),b("ngModelChange",function(r){return h(t.codigo,r)||(t.codigo=r),r}),l("keyup.enter",function(){return t.comprobarCodigo()}),c(),a(7,"ion-button",6),l("click",function(){return t.abrirCamara()}),p(8,"ion-icon",7),c()(),a(9,"ion-button",8),l("click",function(){return t.comprobarCodigo()}),g(10,"COMPROBAR"),c()()()()),o&2&&(u(6),f("ngModel",t.codigo))},dependencies:[_,x,P,v,S,y,O,w,q,I,k],styles:[".fondo-oscuro[_ngcontent-%COMP%]{--background: #0a0a0a;display:flex;justify-content:center;align-items:center;height:100%}.contenedor-formulario[_ngcontent-%COMP%]{max-width:450px;width:90%;margin:auto;margin-top:20vh;padding:2rem;background-color:#111;border-radius:20px;box-shadow:0 0 25px #7c3aed;color:#fff;text-align:center}.qr-item[_ngcontent-%COMP%]{--background: #1a1a22;--color: #e5e7eb;--highlight-color-focused: #7C3AED;--padding-start: 12px;--padding-end: 6px;border-radius:12px;margin-bottom:14px}ion-button.qr-camera[_ngcontent-%COMP%]{--padding-start: 6px;--padding-end: 6px;--background: #1a1a22;--box-shadow: none;--border-radius: 50%;--min-width: auto;min-width:0}ion-button.qr-camera[_ngcontent-%COMP%]::part(native){white-space:nowrap}ion-button.qr-camera[_ngcontent-%COMP%]:hover{--background: #1a1a22}.qr-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.qr-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{--color: #7c3aed;--color-select: #7c3aed}.titulo[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:1.5rem;font-weight:700}ion-input[_ngcontent-%COMP%]{background-color:#1c1c2e;color:#fff;border-radius:8px;margin-bottom:1rem;--padding-start: 1rem}ion-input[_ngcontent-%COMP%]::part(native-input){color:#fff}ion-button[_ngcontent-%COMP%]{--color:white!important;--background: #7c3aed;--border-radius: 12px;font-weight:700}"]});let s=n;return s})();export{Y as ReportePage};
