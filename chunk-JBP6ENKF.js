import{C as j,c as I,d as S,j as R,o as N}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{a as z}from"./chunk-TXXMA5N7.js";import{Aa as h,B as u,Ba as C,Da as M,I as d,J as a,Ja as P,K as s,L as m,S as f,_ as l,gb as i,hb as _,ib as O,kb as b,lb as v,mb as k,qb as w,rb as F,sb as y,ua as x,x as p,z as r}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var J=(()=>{let n=class n{constructor(e,t,o,g){this.fb=e,this.router=t,this.AuthService=o,this.route=g,this.usuariosForm=this.fb.group({password:["",[i.required,i.minLength(6)]],confirmarpassword:["",[i.required,i.minLength(6)]]})}ngOnInit(){this.route.snapshot.queryParamMap.get("token")||(alert("Enlace de recuperaci\xF3n inv\xE1lido."),this.router.navigate(["/","login"]))}recuperando(){let e=this.route.snapshot.queryParamMap.get("token");this.usuariosForm.get("confirmarpassword")?.value!=this.usuariosForm.get("password")?.value?alert("Las contrase\xF1as tienen que coincidir"):this.usuariosForm.valid&&e?this.AuthService.recuperando(e,this.usuariosForm.value).subscribe(t=>{t.status?(alert("Has restaurado tu contrase\xF1a. Inicia sesi\xF3n."),this.router.navigate(["/","login"]),this.usuariosForm.reset(),console.log("Respuesta:",t)):(alert(t.message),this.router.navigate(["/login"],{replaceUrl:!0}))},t=>{console.error("Error al restaurar contrase\xF1a:",t);let o=t?.error?.message||"Error desconocido en el servidor.";alert(o),this.router.navigate(["/login"],{replaceUrl:!0})}):alert("Por favor, completa las contrase\xF1as correctamente.")}};n.\u0275fac=function(t){return new(t||n)(r(w),r(M),r(z),r(C))},n.\u0275cmp=u({type:n,selectors:[["app-recuperando"]],decls:10,vars:1,consts:[[1,"login-page"],[1,"login-wrapper"],[1,"login-box"],[1,"brand"],[3,"ngSubmit","formGroup"],["placeholder","Contrase\xF1a...","type","password","fill","solid","formControlName","password",1,"login-input"],["placeholder","Confirma tu contrase\xF1a...","type","password","fill","solid","formControlName","confirmarpassword",1,"login-input"],["expand","block","type","submit",1,"login-button"]],template:function(t,o){t&1&&(a(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Recupera tu Contrase\xF1a"),s(),a(5,"form",4),f("ngSubmit",function(){return o.recuperando()}),m(6,"ion-input",5)(7,"ion-input",6),a(8,"ion-button",7),l(9,"Restaurar contrase\xF1a"),s()()()()()),t&2&&(p(5),d("formGroup",o.usuariosForm))},dependencies:[j,S,R,N,I,x,P,F,b,_,O,y,v,k,h],styles:['.login-page[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #0f0f0f, #141629, #1c1f35);display:flex;justify-content:center;align-items:center}.login-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;min-height:100%;padding:2rem 1rem}.login-box[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:2rem;border-radius:20px;width:100%;max-width:400px;box-shadow:0 10px 30px #0009;text-align:center}.brand[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;margin-bottom:2rem;letter-spacing:1px;position:relative}.brand[_ngcontent-%COMP%]:before, .brand[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background:transparent;margin:0 auto}.login-input[_ngcontent-%COMP%]{margin-bottom:1rem;--background: rgba(255, 255, 255, .1);--color: white;--placeholder-color: #ccc;--border-radius: 12px}.login-button[_ngcontent-%COMP%]{--background: #6d28d9;--color: white;font-weight:700;letter-spacing:1px;border-radius:10px;margin-top:.5rem}.forgot-password[_ngcontent-%COMP%]{margin-top:1rem;display:block;color:#ccc;font-size:.85rem;text-decoration:none}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7c3aed;font-weight:700;cursor:pointer;text-decoration:none}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px;text-decoration:none}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.compra-card[_ngcontent-%COMP%], .register-box[_ngcontent-%COMP%], .login-box[_ngcontent-%COMP%], .start-container[_ngcontent-%COMP%], .eventos-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:95%!important;margin:auto;font-size:14px}.eventos-section[_ngcontent-%COMP%]   .fila-eventos[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.eventos-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;height:auto}ion-input[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%], .fecha-btn[_ngcontent-%COMP%], .boton-finalizar[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:18px!important}.btn-ticket[_ngcontent-%COMP%]{width:90%;margin:8px auto;padding:10px;font-size:14px}.texto-link[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7c3aed;font-weight:700;cursor:pointer;text-decoration:none}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px;text-decoration:none}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}}']});let c=n;return c})();export{J as RecuperandoPage};
