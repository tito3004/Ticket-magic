import{a as _,b as w,c as S}from"./chunk-JYYXFAZ3.js";import{a as y}from"./chunk-XISFFDA5.js";import{C as P,j as C,m as M,x as O}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{B as v,I as l,J as i,K as a,L as d,_ as b,l as h,ua as x,x as s}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as m,b as u}from"./chunk-JHI3MBHO.js";var j=(()=>{let t=class t{constructor(){this.usersSvc=h(y),this.loading=!1,this.calendarOptions={plugins:[S],initialView:"dayGridMonth",events:[],contentHeight:"auto",headerToolbar:{left:"prev,next today",center:"title",right:""},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}}ngOnInit(){this.cargarEventos()}cargarEventos(){this.loading=!0,this.usersSvc.getResumenPorUsuario().subscribe({next:n=>{if(this.loading=!1,!n?.status){alert(n?.message||"No se pudo cargar tus eventos");return}let e=n.data??[],o=new Map;for(let r of e){let f=String(r.fecha),g=String(r.hora).substring(0,5),p=`${r.nombre_evento}|${f}|${g}`;o.has(p)||o.set(p,{title:r.nombre_evento,start:`${f}T${g}`})}let k=Array.from(o.values());this.calendarOptions=u(m({},this.calendarOptions),{events:k})},error:()=>{this.loading=!1,alert("Error al cargar tus eventos")}})}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v({type:t,selectors:[["app-calendario"]],decls:8,vars:2,consts:[["color","white"],[1,"ion-padding",3,"fullscreen"],[1,"historial-title"],[1,"calendar-container"],[3,"options"]],template:function(e,o){e&1&&(i(0,"ion-header"),d(1,"ion-toolbar",0),a(),i(2,"ion-content",1)(3,"div",2)(4,"h1"),b(5,"Tus eventos"),a()(),i(6,"div",3),d(7,"full-calendar",4),a()()),e&2&&(s(2),l("fullscreen",!0),s(5),l("options",o.calendarOptions))},dependencies:[x,P,C,M,O,w,_],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #0f0f1a, #1a1a2e)}ion-toolbar[_ngcontent-%COMP%]{--background: #0f0f1a;--color: #ffffff}ion-title[_ngcontent-%COMP%]{color:#fff;font-weight:700}.historial-title[_ngcontent-%COMP%]{text-align:center;margin-top:16px;margin-bottom:24px}.historial-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;align-content:center}.calendar-container[_ngcontent-%COMP%]{background-color:#1e1e2e;padding:20px;border-radius:16px;max-width:800px;margin:30px auto;box-shadow:0 4px 12px #00000080;color:#fff}.fc[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.fc[_ngcontent-%COMP%]   .fc-toolbar-title[_ngcontent-%COMP%], .fc[_ngcontent-%COMP%]   .fc-daygrid-day-number[_ngcontent-%COMP%]{color:#fff}.fc-event[_ngcontent-%COMP%]{background-color:#7c3aed;border:none;border-radius:6px;padding:2px 4px;font-size:12px}"]});let c=t;return c})();export{j as CalendarioPage};
