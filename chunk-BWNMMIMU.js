import{C as I,c as w,d as S,j as y,o as F}from"./chunk-LC3UPVSU.js";import"./chunk-ELOAIK2V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VR5KVVOC.js";import"./chunk-3Q5GMNK6.js";import"./chunk-RS5YQJWL.js";import"./chunk-JROSCJGS.js";import"./chunk-OK2I7K27.js";import"./chunk-4CFH7RX6.js";import"./chunk-7FY2OE2O.js";import"./chunk-2QSXEBB7.js";import"./chunk-TTVFM5DY.js";import"./chunk-EZWARTTP.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-HLX4SABQ.js";import"./chunk-CKP3SGE2.js";import"./chunk-OVQHLAQL.js";import{a as k}from"./chunk-TXXMA5N7.js";import{B as d,Da as x,I as p,J as r,K as c,L as u,S as g,_ as a,gb as o,hb as C,ib as _,kb as M,lb as h,mb as P,qb as O,rb as b,sb as v,ua as f,x as m,z as l}from"./chunk-WQ2GXVAN.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var B=(()=>{let i=class i{constructor(t,e,n){this.fb=t,this.router=e,this.authService=n,this.usuariosForm=this.fb.group({correo:["",[o.required,o.email,o.minLength(6),o.maxLength(254),o.pattern(/^[a-zA-Z0-9._%+-]{2,64}@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:["",[o.required,o.minLength(6)]]})}login(){if(!this.usuariosForm.valid){alert("Por favor, completa todos los campos correctamente.");return}this.authService.login(this.usuariosForm.value).subscribe({next:t=>{if(t?.status!==!1&&t?.token){let e=t.token,n=Array.isArray(e)?e.join("."):e;if(!n){alert("Token vac\xEDo o inv\xE1lido.");return}localStorage.setItem("token",n),t.usuario&&localStorage.setItem("usuario",JSON.stringify(t.usuario)),this.usuariosForm.reset(),alert("Has iniciado sesi\xF3n correctamente"),this.router.navigate(["/tabs-user/explorar"])}else alert(t?.message||"Respuesta inesperada del servidor.")},error:t=>{console.error("Error al iniciar sesi\xF3n:",t);let e=t?.error?.message||"Error desconocido en el servidor.";alert(e)}})}irARegistro(){this.router.navigate(["/register"])}};i.\u0275fac=function(e){return new(e||i)(l(O),l(x),l(k))},i.\u0275cmp=d({type:i,selectors:[["app-login"]],decls:17,vars:1,consts:[[1,"login-page"],[1,"login-wrapper"],[1,"login-box"],[1,"brand"],[3,"ngSubmit","formGroup"],["placeholder","Correo electr\xF3nico...","type","email","fill","solid","formControlName","correo",1,"login-input"],["placeholder","Contrase\xF1a...","type","password","fill","solid","formControlName","password",1,"login-input"],["expand","block","type","submit",1,"login-button"],[1,"texto-link-recuperar"],["href","/recuperar",1,"texto-link"],[1,"texto-link"],[3,"click"]],template:function(e,n){e&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"TICKETMAGIC"),c(),r(5,"form",4),g("ngSubmit",function(){return n.login()}),u(6,"ion-input",5)(7,"ion-input",6),r(8,"ion-button",7),a(9,"INICIAR SESI\xD3N"),c()(),r(10,"p",8)(11,"a",9),a(12,"\xBFOlvidaste tu contrase\xF1a?"),c()(),r(13,"p",10),a(14," \xBFNo tienes cuenta? "),r(15,"a",11),g("click",function(){return n.irARegistro()}),a(16,"Crear cuenta"),c()()()()()),e&2&&(m(5),p("formGroup",n.usuariosForm))},dependencies:[f,b,M,C,_,I,S,y,F,w,v,h,P],styles:['.login-page[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #0f0f0f, #141629, #1c1f35);display:flex;justify-content:center;align-items:center}.login-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;min-height:100%;padding:2rem 1rem}.login-box[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:2rem;border-radius:20px;width:100%;max-width:400px;box-shadow:0 10px 30px #0009;text-align:center}.brand[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;margin-bottom:2rem;letter-spacing:1px;position:relative}.brand[_ngcontent-%COMP%]:before, .brand[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background:transparent;margin:0 auto}.login-input[_ngcontent-%COMP%]{margin-bottom:1rem;--background: rgba(255, 255, 255, .1);--color: white;--placeholder-color: #ccc;--border-radius: 12px}.login-button[_ngcontent-%COMP%]{--background: #6d28d9;--color: white;font-weight:700;letter-spacing:1px;border-radius:10px;margin-top:.5rem}.forgot-password[_ngcontent-%COMP%]{margin-top:1rem;display:block;color:#ccc;font-size:.85rem;text-decoration:none}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7c3aed;font-weight:700;cursor:pointer;text-decoration:none}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px;text-decoration:none}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.compra-card[_ngcontent-%COMP%], .register-box[_ngcontent-%COMP%], .login-box[_ngcontent-%COMP%], .start-container[_ngcontent-%COMP%], .eventos-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:95%!important;margin:auto;font-size:14px}.eventos-section[_ngcontent-%COMP%]   .fila-eventos[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.eventos-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;height:auto}ion-input[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%], .fecha-btn[_ngcontent-%COMP%], .boton-finalizar[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:18px!important}.btn-ticket[_ngcontent-%COMP%]{width:90%;margin:8px auto;padding:10px;font-size:14px}.texto-link[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7c3aed;font-weight:700;cursor:pointer;text-decoration:none}.texto-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;text-align:center;margin-top:10px;text-decoration:none}.texto-link-recuperar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}}']});let s=i;return s})();export{B as LoginPage};
