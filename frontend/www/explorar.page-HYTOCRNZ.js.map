{
  "version": 3,
  "sources": ["src/app/components-user/explorar/explorar.page.ts", "src/app/components-user/explorar/explorar.page.html"],
  "sourcesContent": ["// Página para listar eventos y agrupar fechas/lugares\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { PublicService } from '../../services/public.service';\n\n@Component({\n  selector: 'app-explorar',\n  standalone: true,\n  imports: [CommonModule, FormsModule, IonicModule],\n  templateUrl: './explorar.page.html',\n  styleUrls: ['./explorar.page.css']\n})\nexport class ExplorarPage {\n  eventos: any[] = [];\n  fechasPorEvento: { [id: number]: string[] } = {};\n  lugarPorEvento: { [id: number]: string[] } = {};\n\n  constructor(\n    private router: Router,\n    private PublicService: PublicService\n  ) {}\n\n  ngOnInit() {\n    // Consultar eventos al iniciar\n    this.PublicService.consulta_eventos().subscribe((resp) => {\n      const eventos = resp.value;\n\n      // Filtrar eventos únicos\n      const eventosUnicos = eventos.filter(\n        (evento: any, index: number, self: any[]) =>\n          index === self.findIndex((e: any) => e.id_evento === evento.id_evento)\n      );\n\n      // Guardar lista en localStorage\n      localStorage.setItem('Eventos', JSON.stringify(eventosUnicos));\n\n      // Agrupar fechas y lugares\n      const fechasPorEvento: { [id: number]: string[] } = {};\n      const lugarPorEvento: { [id: number]: string[] } = {};\n      eventos.forEach((evento: any) => {\n        const id = evento.id_evento;\n        const fecha = evento.fecha;\n        const lugar = evento.nombre_lugar;\n\n        if (!fechasPorEvento[id]) fechasPorEvento[id] = [];\n        if (!lugarPorEvento[id]) lugarPorEvento[id] = [];\n\n        if (!fechasPorEvento[id].includes(fecha)) fechasPorEvento[id].push(fecha);\n        if (!lugarPorEvento[id].includes(lugar)) lugarPorEvento[id].push(lugar);\n      });\n\n      // Asignar a propiedades\n      this.eventos = eventosUnicos;\n      this.fechasPorEvento = fechasPorEvento;\n      this.lugarPorEvento = lugarPorEvento;\n    });\n  }\n\n  // Imagen por defecto si falla la original\n  onImageError(event: Event) {\n    (event.target as HTMLImageElement).src = 'assets/images/error.jpg';\n  }\n\n  // Ir a página de compra\n  irACompra(): void {\n    this.router.navigate(['/tabs-user/compra']);\n  }\n}\n", "<ion-content class=\"main-content\">\n  <h1 class=\"titulo\">TICKETMAGIC</h1>\n\n  <section class=\"eventos-section\">\n    <h2 class=\"section-title\">Eventos disponibles</h2>\n\n    <div class=\"fila-eventos\">\n      <div class=\"card\" *ngFor=\"let evento of eventos\">\n        <div class=\"imagen-container\">\n          <img [src]=\"'http://localhost:3000/sistema_reserva/public/images/' + evento.imagen_nombre\"\n            (error)=\"onImageError($event)\" alt=\"Imagen del evento\" />\n        </div>\n\n\n        <div class=\"info\">\n          <h3>{{ evento.nombre_evento }}</h3><br>\n          <div class=\"fechas-lista\"*ngIf=\"lugarPorEvento[evento.id_evento]?.length\"></div>\n          <h3 *ngFor=\"let lugar of lugarPorEvento[evento.id_evento]\">{{ lugar }}</h3><br>\n          <!-- Fechas agrupadas por evento -->\n          <p *ngIf=\"fechasPorEvento[evento.id_evento]?.length\">\n            Fechas disponibles:\n          </p>\n          <div class=\"fechas-lista\">\n            <div *ngFor=\"let fecha of fechasPorEvento[evento.id_evento]\">\n              {{ fecha }}\n            </div>\n          </div>\n\n\n          <button class=\"btn-ticket\" (click)=\"irACompra()\">COMPRAR TICKET</button>\n        </div>\n      </div>\n    </div>\n  </section>\n\n</ion-content>"],
  "mappings": "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",
  "names": ["PublicService"]
}
