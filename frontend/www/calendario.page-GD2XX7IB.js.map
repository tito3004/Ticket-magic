{
  "version": 3,
  "sources": ["src/app/components-admin/calendario/calendario.page.ts", "src/app/components-admin/calendario/calendario.page.html"],
  "sourcesContent": ["// Calendario: muestra eventos públicos en FullCalendar\nimport { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FullCalendarModule } from '@fullcalendar/angular';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport { CalendarOptions, EventInput } from '@fullcalendar/core';\nimport { PublicService } from '../../services/public.service';\n\n@Component({\n  selector: 'app-calendario',\n  standalone: true,\n  imports: [CommonModule, IonicModule, FullCalendarModule],\n  templateUrl: './calendario.page.html',\n  styleUrls: ['./calendario.page.css'],\n})\nexport class CalendarioPage implements OnInit {\n  eventos: any[] = []; // cache local\n\n  constructor(private PublicService: PublicService) {}\n\n  // opciones básicas del calendario\n  calendarOptions: CalendarOptions = {\n    plugins: [dayGridPlugin],\n    initialView: 'dayGridMonth',\n    events: [] as EventInput[],\n    timeZone: 'America/Guayaquil',\n    contentHeight: 'auto',\n    headerToolbar: { left: 'prev,next today', center: 'title', right: '' }\n  };\n\n  ngOnInit() {\n    // pedir eventos al backend\n    this.PublicService.consulta_eventos().subscribe((resp) => {\n      const rows = resp?.value ?? [];\n\n      // dejar solo una fila por id_fecha\n      const seen = new Set<string>();\n      const fechasUnicas = rows.filter((r: any) => {\n        const idf = String(r.id_fecha ?? r.id_fechas ?? '');\n        if (!idf) return false;\n        if (seen.has(idf)) return false;\n        seen.add(idf);\n        return true;\n      });\n\n      console.log('Fechas únicas por id_fecha:', fechasUnicas);\n      this.eventos = fechasUnicas;\n      localStorage.setItem('Eventos', JSON.stringify(fechasUnicas));\n\n      // mapear al formato que espera FullCalendar\n      const fcEvents: EventInput[] = fechasUnicas.map((r: any) => {\n        const fecha: string = r.fecha;                    // 'YYYY-MM-DD'\n        const hora: string = (r.hora || '').toString().slice(0, 5); // 'HH:mm'\n        const start = hora ? `${fecha}T${hora}` : fecha;  // si no hay hora, se muestra allDay\n\n        return {\n          id: `${r.id_evento}-${r.id_fecha ?? r.id_fechas}`,\n          title: r.nombre_evento,\n          start,\n          allDay: !hora,\n          extendedProps: {\n            id_evento: Number(r.id_evento),\n            nombre_lugar: r.nombre_lugar,\n            nombre_artista: r.nombre_artista\n          }\n        };\n      });\n\n      // refrescar el calendario\n      this.calendarOptions = { ...this.calendarOptions, events: fcEvents };\n    });\n  }\n}\n", "<ion-header>\n  <ion-toolbar color=\"white\">\n    \n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"ion-padding\">\n\n  <div  class=\"historial-title\">\n  </div>\n  <div class=\"calendar-container\">\n    <full-calendar [options]=\"calendarOptions\"></full-calendar>\n  </div>\n</ion-content>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBM,IAAO,kBAAP,MAAO,gBAAc;EAGzB,YAAoBA,gBAA4B;AAA5B,SAAA,gBAAAA;AAFpB,SAAA,UAAiB,CAAA;AAKjB,SAAA,kBAAmC;MACjC,SAAS,CAAC,KAAa;MACvB,aAAa;MACb,QAAQ,CAAA;MACR,UAAU;MACV,eAAe;MACf,eAAe,EAAE,MAAM,mBAAmB,QAAQ,SAAS,OAAO,GAAE;;EATnB;EAYnD,WAAQ;AAEN,SAAK,cAAc,iBAAgB,EAAG,UAAU,CAAC,SAAQ;AACvD,YAAM,OAAO,MAAM,SAAS,CAAA;AAG5B,YAAM,OAAO,oBAAI,IAAG;AACpB,YAAM,eAAe,KAAK,OAAO,CAAC,MAAU;AAC1C,cAAM,MAAM,OAAO,EAAE,YAAY,EAAE,aAAa,EAAE;AAClD,YAAI,CAAC;AAAK,iBAAO;AACjB,YAAI,KAAK,IAAI,GAAG;AAAG,iBAAO;AAC1B,aAAK,IAAI,GAAG;AACZ,eAAO;MACT,CAAC;AAED,cAAQ,IAAI,kCAA+B,YAAY;AACvD,WAAK,UAAU;AACf,mBAAa,QAAQ,WAAW,KAAK,UAAU,YAAY,CAAC;AAG5D,YAAM,WAAyB,aAAa,IAAI,CAAC,MAAU;AACzD,cAAM,QAAgB,EAAE;AACxB,cAAM,QAAgB,EAAE,QAAQ,IAAI,SAAQ,EAAG,MAAM,GAAG,CAAC;AACzD,cAAM,QAAQ,OAAO,GAAG,KAAK,IAAI,IAAI,KAAK;AAE1C,eAAO;UACL,IAAI,GAAG,EAAE,SAAS,IAAI,EAAE,YAAY,EAAE,SAAS;UAC/C,OAAO,EAAE;UACT;UACA,QAAQ,CAAC;UACT,eAAe;YACb,WAAW,OAAO,EAAE,SAAS;YAC7B,cAAc,EAAE;YAChB,gBAAgB,EAAE;;;MAGxB,CAAC;AAGD,WAAK,kBAAkB,iCAAK,KAAK,kBAAV,EAA2B,QAAQ,SAAQ;IACpE,CAAC;EACH;;;mCAxDW,iBAAc,4BAAA,aAAA,CAAA;AAAA;gFAAd,iBAAc,WAAA,CAAA,CAAA,gBAAA,CAAA,GAAA,OAAA,GAAA,MAAA,GAAA,QAAA,CAAA,CAAA,SAAA,OAAA,GAAA,CAAA,GAAA,eAAA,GAAA,YAAA,GAAA,CAAA,GAAA,iBAAA,GAAA,CAAA,GAAA,oBAAA,GAAA,CAAA,GAAA,SAAA,CAAA,GAAA,UAAA,SAAA,wBAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;AChB3B,IAAA,yBAAA,GAAA,YAAA;AACE,IAAA,oBAAA,GAAA,eAAA,CAAA;AAGF,IAAA,uBAAA;AAEA,IAAA,yBAAA,GAAA,eAAA,CAAA;AAEE,IAAA,oBAAA,GAAA,OAAA,CAAA;AAEA,IAAA,yBAAA,GAAA,OAAA,CAAA;AACE,IAAA,oBAAA,GAAA,iBAAA,CAAA;AACF,IAAA,uBAAA,EAAM;;;AANK,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,cAAA,IAAA;AAKM,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,WAAA,IAAA,eAAA;;kBDCP,cAAc,aAAW,YAAA,WAAA,YAAE,oBAAkB,qBAAA,GAAA,QAAA,CAAA,mtCAAA,EAAA,CAAA;AAInD,IAAO,iBAAP;;sEAAO,gBAAc,CAAA;UAP1B;uBACW,kBAAgB,YACd,MAAI,SACP,CAAC,cAAc,aAAa,kBAAkB,GAAC,UAAA,8TAAA,QAAA,CAAA,mhCAAA,EAAA,CAAA;;;;6EAI7C,gBAAc,EAAA,WAAA,kBAAA,UAAA,0DAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": ["PublicService"]
}
