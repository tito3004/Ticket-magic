{
  "version": 3,
  "sources": ["src/app/components-admin/cancelar/cancelar.page.ts", "src/app/components-admin/cancelar/cancelar.page.html"],
  "sourcesContent": ["// Página para cancelar un evento o generar su reporte\nimport { Component } from '@angular/core';\nimport { IonicModule } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { AdminService } from '../../services/admin.service';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { PublicService } from '../../services/public.service';\n\n@Component({\n  selector: 'app-cancelar',\n  templateUrl: './cancelar.page.html',\n  styleUrls: ['./cancelar.page.css'],\n  standalone: true,\n  imports: [IonicModule, FormsModule, CommonModule, ReactiveFormsModule]\n})\nexport class CancelarPage {\n  cancelarForm: FormGroup; // form para cancelar\n  generarForm: FormGroup;  // form para generar reporte\n  eventos: any[] = [];     // lista de eventos únicos\n\n  constructor(\n    private fb: FormBuilder,\n    private AdminService: AdminService,\n    private router: Router,\n    private PublicService: PublicService\n  ) {\n    // forms simples con un solo campo requerido\n    this.cancelarForm = this.fb.group({\n      nombre_evento: ['', [Validators.required]]\n    });\n    this.generarForm = this.fb.group({\n      nombre_evento: ['', [Validators.required]]\n    });\n  }\n\n  // cargar eventos (únicos por id_evento)\n  ngOnInit() {\n    this.cancelarForm.reset();\n    this.generarForm.reset();\n\n    this.PublicService.consulta_eventos().subscribe((resp) => {\n      const eventos = resp.value;\n      const eventosUnicos = eventos.filter(\n        (evento: any, index: number, self: any[]) =>\n          index === self.findIndex((e: any) => e.id_evento === evento.id_evento)\n      );\n      this.eventos = eventosUnicos;\n      localStorage.setItem('Eventos', JSON.stringify(eventosUnicos));\n    });\n  }\n\n  // cancelar el evento elegido\n  cancelarEvento() {\n    if (this.cancelarForm.valid) {\n      this.AdminService.cancelar_evento(this.cancelarForm.value).subscribe(\n        (resp) => {\n          if (resp.status) {\n            this.cancelarForm.reset();\n            alert('Evento cancelado');\n            this.router.navigate(['/tabs-admin/calendario']);\n          } else {\n            alert(resp.message);\n          }\n        },\n        (err: any) => {\n          console.error('Error al registrase:', err);\n          alert('Hubo un problema al cancelar evento');\n        }\n      );\n    } else {\n      alert('Por favor, completa todos los campos correctamente.');\n    }\n  }\n\n  // generar reporte del evento elegido (envía por correo)\n  reporteEvento() {\n    if (this.generarForm.valid) {\n      this.AdminService.reporte_evento(this.generarForm.value).subscribe(\n        (resp) => {\n          if (resp.status) {\n            this.generarForm.reset();\n            alert('Reporte enviado');\n            this.router.navigate(['/tabs-admin/calendario']);\n          } else {\n            alert(resp.message);\n          }\n        },\n        (err: any) => {\n          console.error('Error al enviar reporte:', err);\n          alert('Hubo un problema al generar reporte');\n        }\n      );\n    } else {\n      alert('Por favor, completa todos los campos correctamente.');\n    }\n  }\n}\n", "<ion-content [fullscreen]=\"true\">\n\n\n  <h2 class=\"titulo\" style=\"margin-top:4vh;\">Administración</h2>\n  <div class=\"contenedor-formulario\">\n    <div class=\"formulario\">\n      <h2 class=\"titulo\">Generar Reporte</h2>\n      <form [formGroup]=\"generarForm\" (ngSubmit)=\"reporteEvento()\">\n      <ion-item lines=\"none\">\n        <ion-label position=\"stacked\">Genere reporte de:</ion-label>\n        <ion-select formControlName=\"nombre_evento\" placeholder=\"Selecciona un evento\" required>\n          <ion-select-option *ngFor=\"let evento of eventos\">{{evento.nombre_evento}}</ion-select-option>\n        </ion-select>\n      </ion-item>\n      <ion-button expand=\"block\" type=\"submit\">\n        GENERAR\n      </ion-button>\n    </form>\n    </div>\n  </div>\n  <div class=\"cancelar-container\">\n    <h2>Cancelar Evento</h2>\n\n    <form [formGroup]=\"cancelarForm\" (ngSubmit)=\"cancelarEvento()\">\n      <ion-item lines=\"none\">\n        <ion-label position=\"stacked\">Evento a cancelar</ion-label>\n        <ion-select formControlName=\"nombre_evento\" placeholder=\"Selecciona un evento\" required>\n          <ion-select-option *ngFor=\"let evento of eventos\">{{evento.nombre_evento}}</ion-select-option>\n        </ion-select>\n      </ion-item>\n\n\n      <ion-button expand=\"block\" type=\"submit\" class=\"button-cancelar\">\n        Cancelar Evento\n      </ion-button>\n    </form>\n  </div>\n\n\n</ion-content>"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACWU,IAAA,yBAAA,GAAA,mBAAA;AAAkD,IAAA,iBAAA,CAAA;AAAwB,IAAA,uBAAA;;;;AAAxB,IAAA,oBAAA;AAAA,IAAA,4BAAA,UAAA,aAAA;;;;;AAgBlD,IAAA,yBAAA,GAAA,mBAAA;AAAkD,IAAA,iBAAA,CAAA;AAAwB,IAAA,uBAAA;;;;AAAxB,IAAA,oBAAA;AAAA,IAAA,4BAAA,UAAA,aAAA;;;ADVtD,IAAO,gBAAP,MAAO,cAAY;EAKvB,YACU,IACAA,eACA,QACAC,gBAA4B;AAH5B,SAAA,KAAA;AACA,SAAA,eAAAD;AACA,SAAA,SAAA;AACA,SAAA,gBAAAC;AANV,SAAA,UAAiB,CAAA;AASf,SAAK,eAAe,KAAK,GAAG,MAAM;MAChC,eAAe,CAAC,IAAI,CAAC,WAAW,QAAQ,CAAC;KAC1C;AACD,SAAK,cAAc,KAAK,GAAG,MAAM;MAC/B,eAAe,CAAC,IAAI,CAAC,WAAW,QAAQ,CAAC;KAC1C;EACH;;EAGA,WAAQ;AACN,SAAK,aAAa,MAAK;AACvB,SAAK,YAAY,MAAK;AAEtB,SAAK,cAAc,iBAAgB,EAAG,UAAU,CAAC,SAAQ;AACvD,YAAM,UAAU,KAAK;AACrB,YAAM,gBAAgB,QAAQ,OAC5B,CAAC,QAAa,OAAe,SAC3B,UAAU,KAAK,UAAU,CAAC,MAAW,EAAE,cAAc,OAAO,SAAS,CAAC;AAE1E,WAAK,UAAU;AACf,mBAAa,QAAQ,WAAW,KAAK,UAAU,aAAa,CAAC;IAC/D,CAAC;EACH;;EAGA,iBAAc;AACZ,QAAI,KAAK,aAAa,OAAO;AAC3B,WAAK,aAAa,gBAAgB,KAAK,aAAa,KAAK,EAAE,UACzD,CAAC,SAAQ;AACP,YAAI,KAAK,QAAQ;AACf,eAAK,aAAa,MAAK;AACvB,gBAAM,kBAAkB;AACxB,eAAK,OAAO,SAAS,CAAC,wBAAwB,CAAC;QACjD,OAAO;AACL,gBAAM,KAAK,OAAO;QACpB;MACF,GACA,CAAC,QAAY;AACX,gBAAQ,MAAM,wBAAwB,GAAG;AACzC,cAAM,qCAAqC;MAC7C,CAAC;IAEL,OAAO;AACL,YAAM,qDAAqD;IAC7D;EACF;;EAGA,gBAAa;AACX,QAAI,KAAK,YAAY,OAAO;AAC1B,WAAK,aAAa,eAAe,KAAK,YAAY,KAAK,EAAE,UACvD,CAAC,SAAQ;AACP,YAAI,KAAK,QAAQ;AACf,eAAK,YAAY,MAAK;AACtB,gBAAM,iBAAiB;AACvB,eAAK,OAAO,SAAS,CAAC,wBAAwB,CAAC;QACjD,OAAO;AACL,gBAAM,KAAK,OAAO;QACpB;MACF,GACA,CAAC,QAAY;AACX,gBAAQ,MAAM,4BAA4B,GAAG;AAC7C,cAAM,qCAAqC;MAC7C,CAAC;IAEL,OAAO;AACL,YAAM,qDAAqD;IAC7D;EACF;;;mCAhFW,eAAY,4BAAA,WAAA,GAAA,4BAAA,YAAA,GAAA,4BAAA,MAAA,GAAA,4BAAA,aAAA,CAAA;AAAA;8EAAZ,eAAY,WAAA,CAAA,CAAA,cAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,UAAA,GAAA,cAAA,KAAA,GAAA,CAAA,GAAA,uBAAA,GAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,QAAA,GAAA,CAAA,GAAA,YAAA,WAAA,GAAA,CAAA,SAAA,MAAA,GAAA,CAAA,YAAA,SAAA,GAAA,CAAA,mBAAA,iBAAA,eAAA,wBAAA,YAAA,EAAA,GAAA,CAAA,GAAA,SAAA,SAAA,GAAA,CAAA,UAAA,SAAA,QAAA,QAAA,GAAA,CAAA,GAAA,oBAAA,GAAA,CAAA,UAAA,SAAA,QAAA,UAAA,GAAA,iBAAA,CAAA,GAAA,UAAA,SAAA,sBAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;ACjBzB,IAAA,yBAAA,GAAA,eAAA,CAAA,EAAiC,GAAA,MAAA,CAAA;AAGY,IAAA,iBAAA,GAAA,mBAAA;AAAc,IAAA,uBAAA;AACzD,IAAA,yBAAA,GAAA,OAAA,CAAA,EAAmC,GAAA,OAAA,CAAA,EACT,GAAA,MAAA,CAAA;AACH,IAAA,iBAAA,GAAA,iBAAA;AAAe,IAAA,uBAAA;AAClC,IAAA,yBAAA,GAAA,QAAA,CAAA;AAAgC,IAAA,qBAAA,YAAA,SAAA,iDAAA;AAAA,aAAY,IAAA,cAAA;IAAe,CAAA;AAC3D,IAAA,yBAAA,GAAA,YAAA,CAAA,EAAuB,GAAA,aAAA,CAAA;AACS,IAAA,iBAAA,IAAA,oBAAA;AAAkB,IAAA,uBAAA;AAChD,IAAA,yBAAA,IAAA,cAAA,CAAA;AACE,IAAA,qBAAA,IAAA,4CAAA,GAAA,GAAA,qBAAA,CAAA;AACF,IAAA,uBAAA,EAAa;AAEf,IAAA,yBAAA,IAAA,cAAA,EAAA;AACE,IAAA,iBAAA,IAAA,WAAA;AACF,IAAA,uBAAA,EAAa,EACR,EACD;AAER,IAAA,yBAAA,IAAA,OAAA,EAAA,EAAgC,IAAA,IAAA;AAC1B,IAAA,iBAAA,IAAA,iBAAA;AAAe,IAAA,uBAAA;AAEnB,IAAA,yBAAA,IAAA,QAAA,CAAA;AAAiC,IAAA,qBAAA,YAAA,SAAA,kDAAA;AAAA,aAAY,IAAA,eAAA;IAAgB,CAAA;AAC3D,IAAA,yBAAA,IAAA,YAAA,CAAA,EAAuB,IAAA,aAAA,CAAA;AACS,IAAA,iBAAA,IAAA,mBAAA;AAAiB,IAAA,uBAAA;AAC/C,IAAA,yBAAA,IAAA,cAAA,CAAA;AACE,IAAA,qBAAA,IAAA,4CAAA,GAAA,GAAA,qBAAA,CAAA;AACF,IAAA,uBAAA,EAAa;AAIf,IAAA,yBAAA,IAAA,cAAA,EAAA;AACE,IAAA,iBAAA,IAAA,mBAAA;AACF,IAAA,uBAAA,EAAa,EACR,EACH;;;AApCK,IAAA,qBAAA,cAAA,IAAA;AAOD,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,aAAA,IAAA,WAAA;AAIoC,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,WAAA,IAAA,OAAA;AAYtC,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,aAAA,IAAA,YAAA;AAIsC,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,WAAA,IAAA,OAAA;;kBDZpC,aAAW,WAAA,YAAA,SAAA,UAAA,WAAA,iBAAA,8BAAE,aAAW,oBAAA,iBAAA,sBAAA,mBAAE,cAAY,SAAE,qBAAmB,oBAAA,eAAA,GAAA,QAAA,CAAA,6+DAAA,EAAA,CAAA;AAEjE,IAAO,eAAP;;sEAAO,cAAY,CAAA;UAPxB;uBACW,gBAAc,YAGZ,MAAI,SACP,CAAC,aAAa,aAAa,cAAc,mBAAmB,GAAC,UAAA,q4CAAA,QAAA,CAAA,wuDAAA,EAAA,CAAA;;;;6EAE3D,cAAY,EAAA,WAAA,gBAAA,UAAA,sDAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": ["AdminService", "PublicService"]
}
