{
  "version": 3,
  "sources": ["src/app/components-user/recuperando/recuperando.page.ts", "src/app/components-user/recuperando/recuperando.page.html"],
  "sourcesContent": ["// Restaurar contraseña: formulario de nueva clave y envío usando el token de la URL\nimport { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { RouterModule, Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../services/auth.service'\nimport { HttpClientModule } from '@angular/common/http';\n\n@Component({\n  selector: 'app-recuperando',\n  templateUrl: './recuperando.page.html',\n  styleUrls: ['./recuperando.page.scss'],\n  standalone: true,\n  imports: [IonicModule, CommonModule, RouterModule, FormsModule, ReactiveFormsModule, HttpClientModule]\n})\nexport class RecuperandoPage {\n  usuariosForm: FormGroup; // password + confirmar\n\n  constructor(\n    private fb: FormBuilder,\n    private router: Router,\n    private AuthService: AuthService,\n    private route: ActivatedRoute\n  ) {\n    this.usuariosForm = this.fb.group({\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      confirmarpassword: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n\n  // valida que exista token en la URL\n  ngOnInit(): void {\n    const token = this.route.snapshot.queryParamMap.get('token');\n    if (!token) {\n      alert('Enlace de recuperación inválido.');\n      this.router.navigate(['/', 'login']);\n    }\n  }\n\n  // envía nueva contraseña si todo está correcto\n  recuperando() {\n    const token = this.route.snapshot.queryParamMap.get('token');\n\n    if (this.usuariosForm.get('confirmarpassword')?.value != this.usuariosForm.get('password')?.value) {\n      alert('Las contraseñas tienen que coincidir');\n    } else if (this.usuariosForm.valid && token) {\n      this.AuthService.recuperando(token, this.usuariosForm.value).subscribe(\n        (resp) => {\n          if (resp.status) {\n            alert('Has restaurado tu contraseña. Inicia sesión.');\n            this.router.navigate(['/', 'login']);\n            this.usuariosForm.reset();\n            console.log('Respuesta:', resp);\n          } else {\n            alert(resp.message);\n            this.router.navigate(['/login'], { replaceUrl: true });\n          }\n        },\n        (err: any) => {\n          console.error('Error al restaurar contraseña:', err);\n          const backendMessage = err?.error?.message || 'Error desconocido en el servidor.';\n          alert(backendMessage);\n          this.router.navigate(['/login'], { replaceUrl: true });\n        }\n      );\n    } else {\n      alert('Por favor, completa las contraseñas correctamente.');\n    }\n  }\n}\n", "<ion-content class=\"login-page\">\n  <div class=\"login-wrapper\">\n    <div class=\"login-box\">\n      <h1 class=\"brand\">Recupera tu Contraseña</h1>\n      <form [formGroup]=\"usuariosForm\" (ngSubmit)=\"recuperando()\">\n      <ion-input\n        class=\"login-input\"\n        placeholder=\"Contraseña...\"\n        type=\"password\"\n        fill=\"solid\"\n        formControlName=\"password\">\n      </ion-input>\n\n      <ion-input\n        class=\"login-input\"\n        placeholder=\"Confirma tu contraseña...\"\n        type=\"password\"\n        fill=\"solid\"\n        formControlName=\"confirmarpassword\">\n      </ion-input>\n      <ion-button expand=\"block\" class=\"login-button\" type=\"submit\">Restaurar contraseña</ion-button>\n    </form>\n    </div>\n  </div>\n</ion-content>"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBM,IAAO,mBAAP,MAAO,iBAAe;EAG1B,YACU,IACA,QACAA,cACA,OAAqB;AAHrB,SAAA,KAAA;AACA,SAAA,SAAA;AACA,SAAA,cAAAA;AACA,SAAA,QAAA;AAER,SAAK,eAAe,KAAK,GAAG,MAAM;MAChC,UAAU,CAAC,IAAI,CAAC,WAAW,UAAU,WAAW,UAAU,CAAC,CAAC,CAAC;MAC7D,mBAAmB,CAAC,IAAI,CAAC,WAAW,UAAU,WAAW,UAAU,CAAC,CAAC,CAAC;KACvE;EACH;;EAGA,WAAQ;AACN,UAAM,QAAQ,KAAK,MAAM,SAAS,cAAc,IAAI,OAAO;AAC3D,QAAI,CAAC,OAAO;AACV,YAAM,wCAAkC;AACxC,WAAK,OAAO,SAAS,CAAC,KAAK,OAAO,CAAC;IACrC;EACF;;EAGA,cAAW;AACT,UAAM,QAAQ,KAAK,MAAM,SAAS,cAAc,IAAI,OAAO;AAE3D,QAAI,KAAK,aAAa,IAAI,mBAAmB,GAAG,SAAS,KAAK,aAAa,IAAI,UAAU,GAAG,OAAO;AACjG,YAAM,yCAAsC;IAC9C,WAAW,KAAK,aAAa,SAAS,OAAO;AAC3C,WAAK,YAAY,YAAY,OAAO,KAAK,aAAa,KAAK,EAAE,UAC3D,CAAC,SAAQ;AACP,YAAI,KAAK,QAAQ;AACf,gBAAM,oDAA8C;AACpD,eAAK,OAAO,SAAS,CAAC,KAAK,OAAO,CAAC;AACnC,eAAK,aAAa,MAAK;AACvB,kBAAQ,IAAI,cAAc,IAAI;QAChC,OAAO;AACL,gBAAM,KAAK,OAAO;AAClB,eAAK,OAAO,SAAS,CAAC,QAAQ,GAAG,EAAE,YAAY,KAAI,CAAE;QACvD;MACF,GACA,CAAC,QAAY;AACX,gBAAQ,MAAM,qCAAkC,GAAG;AACnD,cAAM,iBAAiB,KAAK,OAAO,WAAW;AAC9C,cAAM,cAAc;AACpB,aAAK,OAAO,SAAS,CAAC,QAAQ,GAAG,EAAE,YAAY,KAAI,CAAE;MACvD,CAAC;IAEL,OAAO;AACL,YAAM,uDAAoD;IAC5D;EACF;;;mCArDW,kBAAe,4BAAA,WAAA,GAAA,4BAAA,MAAA,GAAA,4BAAA,WAAA,GAAA,4BAAA,cAAA,CAAA;AAAA;iFAAf,kBAAe,WAAA,CAAA,CAAA,iBAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,OAAA,GAAA,CAAA,GAAA,YAAA,WAAA,GAAA,CAAA,eAAA,oBAAA,QAAA,YAAA,QAAA,SAAA,mBAAA,YAAA,GAAA,aAAA,GAAA,CAAA,eAAA,gCAAA,QAAA,YAAA,QAAA,SAAA,mBAAA,qBAAA,GAAA,aAAA,GAAA,CAAA,UAAA,SAAA,QAAA,UAAA,GAAA,cAAA,CAAA,GAAA,UAAA,SAAA,yBAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;ACjB5B,IAAA,yBAAA,GAAA,eAAA,CAAA,EAAgC,GAAA,OAAA,CAAA,EACH,GAAA,OAAA,CAAA,EACF,GAAA,MAAA,CAAA;AACH,IAAA,iBAAA,GAAA,2BAAA;AAAsB,IAAA,uBAAA;AACxC,IAAA,yBAAA,GAAA,QAAA,CAAA;AAAiC,IAAA,qBAAA,YAAA,SAAA,oDAAA;AAAA,aAAY,IAAA,YAAA;IAAa,CAAA;AAC1D,IAAA,oBAAA,GAAA,aAAA,CAAA,EAMY,GAAA,aAAA,CAAA;AASZ,IAAA,yBAAA,GAAA,cAAA,CAAA;AAA8D,IAAA,iBAAA,GAAA,yBAAA;AAAoB,IAAA,uBAAA,EAAa,EAC1F,EACD,EACF;;;AAnBI,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,aAAA,IAAA,YAAA;;kBDWA,aAAW,WAAA,YAAA,UAAA,4BAAE,cAAc,cAAc,aAAW,oBAAA,iBAAA,sBAAE,qBAAmB,oBAAA,iBAAE,gBAAgB,GAAA,QAAA,CAAA,67HAAA,EAAA,CAAA;AAEjG,IAAO,kBAAP;;sEAAO,iBAAe,CAAA;UAP3B;uBACW,mBAAiB,YAGf,MAAI,SACP,CAAC,aAAa,cAAc,cAAc,aAAa,qBAAqB,gBAAgB,GAAC,UAAA,8wBAAA,QAAA,CAAA,olGAAA,EAAA,CAAA;;;;6EAE3F,iBAAe,EAAA,WAAA,mBAAA,UAAA,2DAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": ["AuthService"]
}
